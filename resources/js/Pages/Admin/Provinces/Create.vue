<script setup>
import AdminLayout from "@/Layouts/AdminLayout.vue";
import {
    InputText,
    Select,
    InputNumber,
    Textarea,
    ToggleSwitch,
} from "primevue";
import InputSection from "@/Components/Admin/InputSection.vue";
import FormControl from "@/Components/Admin/FormControl.vue";
import { useForm } from "@inertiajs/vue3";
import { ref } from "vue";

const form = useForm({
    name: "",
    name_en: "",
    description: "",
    region: "",
    latitude: "",
    longitude: "",
    image_url: "",
    is_popular: false,
});

const regions = ref([
    { label: "ğŸ”ï¸ à¹€à¸«à¸™à¸·à¸­", value: "north" },
    { label: "ğŸ™ï¸ à¸à¸¥à¸²à¸‡", value: "central" },
    { label: "ğŸ–ï¸ à¹ƒà¸•à¹‰", value: "south" },
    { label: "ğŸŒ¾ à¸­à¸µà¸ªà¸²à¸™", value: "northeast" },
    { label: "ğŸŒ… à¸•à¸°à¸§à¸±à¸™à¸­à¸­à¸", value: "east" },
    { label: "ğŸŒ„ à¸•à¸°à¸§à¸±à¸™à¸•à¸", value: "west" },
]);

const submit = () => {
    form.post(route("admin.provinces.store"), {
        onSuccess: () => {
            form.reset();
        },
    });
};
</script>

<template>
    <AdminLayout title="à¹€à¸à¸´à¹ˆà¸¡à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”">
        <form @submit.prevent="submit">
            <div class="grid grid-cols-2 gap-4">
                <InputSection
                    name="name"
                    label="à¸Šà¸·à¹ˆà¸­à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"
                    :errorMessage="form.errors.name"
                >
                    <InputText
                        id="name"
                        name="name"
                        v-model="form.name"
                        placeholder="à¸‚à¸­à¸™à¹à¸à¹ˆà¸™"
                    />
                </InputSection>

                <InputSection
                    name="name_en"
                    label="à¸Šà¸·à¹ˆà¸­à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸” (à¸­à¸±à¸‡à¸à¸¤à¸©)"
                    :errorMessage="form.errors.name_en"
                >
                    <InputText
                        id="name_en"
                        name="name_en"
                        v-model="form.name_en"
                        placeholder="Khon Khen"
                    />
                </InputSection>

                <InputSection
                    name="description"
                    label="à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"
                    :errorMessage="form.errors.description"
                >
                    <Textarea
                        id="description"
                        name="description"
                        v-model="form.description"
                        rows="5"
                        placeholder="à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”à¸‚à¸­à¸™à¹à¸à¹ˆà¸™ à¹€à¸›à¹‡à¸™à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”à¸—à¸µà¹ˆà¸•à¸±à¹‰à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸ à¸²à¸„à¸•à¸°à¸§à¸±à¸™à¸­à¸­à¸à¹€à¸‰à¸µà¸¢à¸‡à¹€à¸«à¸™à¸·à¸­à¸‚à¸­à¸‡à¸›à¸£à¸°à¹€à¸—à¸¨à¹„à¸—à¸¢..."
                    >
                    </Textarea>
                </InputSection>

                <InputSection
                    class="col-span-2"
                    name="region"
                    label="à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„"
                    :errorMessage="form.errors.region"
                >
                    <Select
                        id="region"
                        name="region"
                        v-model="form.region"
                        placeholder="à¹€à¸¥à¸·à¸­à¸à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„"
                        :options="regions"
                        optionLabel="label"
                        optionValue="value"
                    />
                </InputSection>

                <InputSection
                    name="latitude"
                    label="à¸¥à¸°à¸•à¸´à¸ˆà¸¹à¸”"
                    :errorMessage="form.errors.latitude"
                >
                    <InputNumber
                        id="latitude"
                        name="latitude"
                        v-model="form.latitude"
                        placeholder="20.4419"
                    />
                </InputSection>

                <InputSection
                    name="longitude"
                    label="à¸¥à¸­à¸‡à¸ˆà¸´à¸ˆà¸¹à¸”"
                    :errorMessage="form.errors.longitude"
                >
                    <InputNumber
                        id="longitude"
                        name="longitude"
                        v-model="form.longitude"
                        placeholder="20.4419"
                    />
                </InputSection>

                <InputSection
                    name="image_url"
                    label="à¸£à¸¹à¸›à¸ à¸²à¸à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"
                    :errorMessage="form.errors.image_url"
                >
                    <Textarea
                        id="image_url"
                        name="image_url"
                        v-model="form.image_url"
                        rows="5"
                        placeholder="https://example.com/image.jpg"
                    >
                    </Textarea>
                </InputSection>

                <InputSection
                    class="col-span-2"
                    name="is_popular"
                    label="à¸¢à¸­à¸”à¸™à¸´à¸¢à¸¡"
                    :errorMessage="form.errors.is_popular"
                >
                    <ToggleSwitch
                        id="is_popular"
                        name="is_popular"
                        v-model="form.is_popular"
                    />
                </InputSection>
            </div>

            <FormControl
                :backRoute="route('admin.provinces.index')"
                :processing="form.processing"
                @reset="form.reset()"
            />
        </form>
    </AdminLayout>
</template>
