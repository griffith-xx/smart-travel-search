<script setup>
import UserLayout from "@/Layouts/UserLayout.vue";
import { Button } from "primevue";
import { Link } from "@inertiajs/vue3";
import { computed } from "vue";

const props = defineProps({
    preference: {
        type: Object,
        default: null,
    },
});

const hasPreference = computed(() => props.preference !== null);

const personals = [
    {
        icon: "üéØ",
        title: "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß",
        description: "‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
    },
    {
        icon: "üèÉ‚Äç‚ôÄÔ∏è",
        title: "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö",
        description: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì",
    },
    {
        icon: "üí∞",
        title: "‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì",
        description: "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì",
    },
];

const rewards = [
    "‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°",
    "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£",
    "‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì",
    "‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô",
];
</script>

<template>
    <UserLayout title="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô">
        <!-- Hero Section -->
        <div class="relative text-white overflow-hidden">
            <!-- Background Image -->
            <div
                class="absolute inset-0 bg-cover bg-center bg-no-repeat"
                style="
                    background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=2070');
                "
            ></div>

            <!-- Black Opacity Overlay -->
            <div class="absolute inset-0 bg-black/60"></div>

            <!-- Content -->
            <div
                class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16"
            >
                <div class="text-center max-w-3xl mx-auto">
                    <div class="mb-4">
                        <i class="pi pi-sliders-h text-5xl opacity-90"></i>
                    </div>
                    <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
                        ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                    </h1>
                    <p class="text-lg md:text-xl opacity-90">
                        {{
                            hasPreference
                                ? "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"
                                : "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏π‡πà‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì"
                        }}
                    </p>
                </div>
            </div>
        </div>

        <!-- Content Section -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
            <!-- Has Preference - Show Details -->
            <div v-if="hasPreference">
                <div class="mb-8 flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold mb-2">
                            ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
                        </h2>
                        <p class="text-sm opacity-70">
                            ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:
                            {{
                                new Date(
                                    preference.updated_at
                                ).toLocaleDateString("th-TH", {
                                    year: "numeric",
                                    month: "long",
                                    day: "numeric",
                                })
                            }}
                        </p>
                    </div>
                    <Button
                        label="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö"
                        outlined
                        asChild
                        v-slot="slotProps"
                    >
                        <Link
                            :class="slotProps.class"
                            :href="route('preferences.edit')"
                        >
                            <i class="pi pi-pencil"></i>
                            ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏≠‡∏ö
                        </Link>
                    </Button>
                </div>

                <!-- Preference Cards Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Wellness Goals -->
                    <div
                        v-if="
                            preference.wellness_goals &&
                            preference.wellness_goals.length > 0
                        "
                        class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 p-6"
                    >
                        <div class="flex items-center gap-3 mb-4">
                            <div
                                class="w-12 h-12 rounded-full bg-[var(--p-primary-color)]/10 flex items-center justify-center text-2xl"
                            >
                                üéØ
                            </div>
                            <h3 class="text-xl font-semibold">
                                ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏£‡∏á‡∏ö‡∏±‡∏ô‡∏î‡∏≤‡∏•‡πÉ‡∏à
                            </h3>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <span
                                v-for="goal in preference.wellness_goals"
                                :key="goal.id"
                                class="inline-flex items-center px-3 py-1.5 bg-[var(--p-primary-color)]/10 text-[var(--p-primary-color)] rounded-full text-sm"
                            >
                                {{ goal.name }}
                            </span>
                        </div>
                    </div>

                    <!-- Activities -->
                    <div
                        v-if="
                            preference.activities &&
                            preference.activities.length > 0
                        "
                        class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 p-6"
                    >
                        <div class="flex items-center gap-3 mb-4">
                            <div
                                class="w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center text-2xl"
                            >
                                üèÉ‚Äç‚ôÄÔ∏è
                            </div>
                            <h3 class="text-xl font-semibold">
                                ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à
                            </h3>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <span
                                v-for="activity in preference.activities"
                                :key="activity.id"
                                class="inline-flex items-center px-3 py-1.5 bg-green-500/10 text-green-600 dark:text-green-400 rounded-full text-sm"
                            >
                                {{ activity.name }}
                            </span>
                        </div>
                    </div>

                    <!-- Environments -->
                    <div
                        v-if="
                            preference.environments &&
                            preference.environments.length > 0
                        "
                        class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 p-6"
                    >
                        <div class="flex items-center gap-3 mb-4">
                            <div
                                class="w-12 h-12 rounded-full bg-blue-500/10 flex items-center justify-center text-2xl"
                            >
                                üå¥
                            </div>
                            <h3 class="text-xl font-semibold">
                                ‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö
                            </h3>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <span
                                v-for="env in preference.environments"
                                :key="env.id"
                                class="inline-flex items-center px-3 py-1.5 bg-blue-500/10 text-blue-600 dark:text-blue-400 rounded-full text-sm"
                            >
                                {{ env.name }}
                            </span>
                        </div>
                    </div>

                    <!-- Duration Intensity -->
                    <div
                        v-if="preference.duration_intensity"
                        class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 p-6"
                    >
                        <div class="flex items-center gap-3 mb-4">
                            <div
                                class="w-12 h-12 rounded-full bg-purple-500/10 flex items-center justify-center text-2xl"
                            >
                                ‚è±Ô∏è
                            </div>
                            <h3 class="text-xl font-semibold">
                                ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô
                            </h3>
                        </div>
                        <div
                            class="bg-purple-500/10 text-purple-600 dark:text-purple-400 rounded-lg p-4"
                        >
                            <div class="font-semibold mb-1">
                                {{ preference.duration_intensity.name }}
                            </div>
                            <div
                                v-if="preference.duration_intensity.description"
                                class="text-sm opacity-80"
                            >
                                {{ preference.duration_intensity.description }}
                            </div>
                        </div>
                    </div>

                    <!-- Budget Accommodation -->
                    <div
                        v-if="preference.budget_accommodation"
                        class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 p-6"
                    >
                        <div class="flex items-center gap-3 mb-4">
                            <div
                                class="w-12 h-12 rounded-full bg-amber-500/10 flex items-center justify-center text-2xl"
                            >
                                üí∞
                            </div>
                            <h3 class="text-xl font-semibold">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</h3>
                        </div>
                        <div
                            class="bg-amber-500/10 text-amber-600 dark:text-amber-400 rounded-lg p-4"
                        >
                            <div class="font-semibold mb-1">
                                {{ preference.budget_accommodation.name }}
                            </div>
                            <div
                                v-if="
                                    preference.budget_accommodation.description
                                "
                                class="text-sm opacity-80"
                            >
                                {{
                                    preference.budget_accommodation.description
                                }}
                            </div>
                        </div>
                    </div>

                    <!-- Wellness Experience -->
                    <div
                        v-if="preference.wellness_experience"
                        class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 p-6"
                    >
                        <div class="flex items-center gap-3 mb-4">
                            <div
                                class="w-12 h-12 rounded-full bg-pink-500/10 flex items-center justify-center text-2xl"
                            >
                                ‚≠ê
                            </div>
                            <h3 class="text-xl font-semibold">
                                ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
                            </h3>
                        </div>
                        <div
                            class="bg-pink-500/10 text-pink-600 dark:text-pink-400 rounded-lg p-4"
                        >
                            <div class="font-semibold mb-1">
                                {{ preference.wellness_experience.name }}
                            </div>
                            <div
                                v-if="
                                    preference.wellness_experience.description
                                "
                                class="text-sm opacity-80"
                            >
                                {{ preference.wellness_experience.description }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div
                    class="mt-8 flex flex-col sm:flex-row gap-4 justify-center"
                >
                    <Button
                        label="‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏â‡∏±‡∏ô"
                        size="large"
                        asChild
                        v-slot="slotProps"
                    >
                        <Link
                            :class="slotProps.class"
                            :href="route('destinations.recommended')"
                        >
                            <i class="pi pi-star"></i>
                            ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏â‡∏±‡∏ô
                        </Link>
                    </Button>
                    <Button
                        label="‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"
                        severity="secondary"
                        outlined
                        size="large"
                        asChild
                        v-slot="slotProps"
                    >
                        <Link
                            :class="slotProps.class"
                            :href="route('destinations.index')"
                        >
                            <i class="pi pi-compass"></i>
                            ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </Link>
                    </Button>
                </div>
            </div>

            <!-- No Preference - Welcome Screen -->
            <div v-else>
                <div
                    class="bg-[var(--p-content-background)] rounded-xl border border-surface-300 dark:border-surface-700 shadow-sm p-6 md:p-10 max-w-4xl mx-auto"
                >
                    <div class="text-center mb-8">
                        <div
                            class="w-20 h-20 mx-auto mb-6 rounded-full bg-[var(--p-primary-color)]/10 flex items-center justify-center text-4xl"
                        >
                            üìã
                        </div>

                        <h2 class="text-2xl md:text-3xl font-bold mb-3">
                            ‡πÅ‡∏ö‡∏ö‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
                        </h2>

                        <p class="text-lg opacity-70 max-w-2xl mx-auto">
                            ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á 2-3 ‡∏ô‡∏≤‡∏ó‡∏µ
                            ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                            ‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
                        </p>
                    </div>

                    <!-- Feature Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div
                            v-for="personal in personals"
                            :key="personal.title"
                            class="flex flex-col items-center text-center p-6 rounded-xl border border-surface-300 dark:border-surface-700 hover:bg-[var(--p-content-hover-background)] transition"
                        >
                            <div
                                class="w-16 h-16 rounded-full bg-[var(--p-primary-color)]/10 flex items-center justify-center text-3xl mb-4"
                            >
                                {{ personal.icon }}
                            </div>
                            <h3 class="text-lg font-semibold mb-2">
                                {{ personal.title }}
                            </h3>
                            <p class="text-sm opacity-70">
                                {{ personal.description }}
                            </p>
                        </div>
                    </div>

                    <!-- Benefits -->
                    <div
                        class="bg-[var(--p-primary-color)]/5 rounded-xl p-6 mb-8"
                    >
                        <h3
                            class="text-lg font-semibold mb-4 flex items-center gap-2"
                        >
                            <i class="pi pi-gift"></i>
                            <span>‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</span>
                        </h3>
                        <ul class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <li
                                v-for="reward in rewards"
                                :key="reward"
                                class="flex items-start gap-2"
                            >
                                <i
                                    class="pi pi-check-circle text-green-500 mt-1"
                                ></i>
                                <span class="opacity-80">{{ reward }}</span>
                            </li>
                        </ul>
                    </div>

                    <!-- CTA Buttons -->
                    <div class="flex flex-col items-center gap-4">
                        <Button
                            label="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° (2-3 ‡∏ô‡∏≤‡∏ó‡∏µ)"
                            size="large"
                            class="w-full sm:w-auto"
                            asChild
                            v-slot="slotProps"
                        >
                            <Link
                                :class="slotProps.class"
                                :href="route('preferences.create')"
                            >
                                ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏° (2-3 ‡∏ô‡∏≤‡∏ó‡∏µ)
                                <i class="pi pi-arrow-right"></i>
                            </Link>
                        </Button>

                        <Link
                            :href="route('destinations.index')"
                            class="text-sm opacity-70 hover:opacity-100 underline transition-all"
                        >
                            ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô
                        </Link>
                    </div>
                </div>
            </div>
        </div>
    </UserLayout>
</template>
